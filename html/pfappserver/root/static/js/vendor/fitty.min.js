!function(a,b){if("function"==typeof define&&define.amd)define(["module","exports"],b);else if("undefined"!=typeof exports)b(module,exports);else{var c={exports:{}};b(c,c.exports),a.fitty=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};b.default=function(a){function b(a,b){var d=c({},x,b),e=a.map(function(a){var b=c({},d,{element:a});return t(b),v(b),{element:a,fit:s(b,f.DIRTY),unsubscribe:u(b)}});return i(),e}function d(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof a?b(e(document.querySelectorAll(a)),c):b([a],c)[0]}if(a){var e=function(a){return[].slice.call(a)},f={IDLE:0,DIRTY_CONTENT:1,DIRTY_LAYOUT:2,DIRTY:3},g=[],h=null,i="requestAnimationFrame"in a?function(){a.cancelAnimationFrame(h),h=a.requestAnimationFrame(function(){k(g.filter(function(a){return a.dirty}))})}:function(){},j=function(a){return function(){g.forEach(function(b){b.dirty=a}),i()}},k=function(a){a.filter(function(a){return!a.styleComputed}).forEach(function(a){a.styleComputed=n(a)}),a.filter(o).forEach(q),a.filter(m).forEach(l),a.forEach(p),a.forEach(r)},l=function(a){a.availableWidth=a.element.parentNode.clientWidth,a.currentWidth=a.element.scrollWidth,a.previousFontSize=a.currentFontSize,a.currentFontSize=Math.min(Math.max(a.minSize,a.availableWidth/a.currentWidth*a.previousFontSize),a.maxSize),a.whiteSpace=a.multiLine&&a.currentFontSize===a.minSize?"normal":"nowrap"},m=function(a){return a.dirty!==f.DIRTY_LAYOUT||a.dirty===f.DIRTY_LAYOUT&&a.element.parentNode.clientWidth!==a.availableWidth},n=function(b){var c=a.getComputedStyle(b.element,null);b.currentFontSize=parseInt(c.getPropertyValue("font-size"),10),b.display=c.getPropertyValue("display"),b.whiteSpace=c.getPropertyValue("white-space")},o=function(a){var b=!1;return/inline-/.test(a.display)||(b=!0,a.display="inline-block"),"nowrap"!==a.whiteSpace&&(b=!0,a.whiteSpace="nowrap"),b},p=function(a){q(a),a.dirty=f.IDLE},q=function(a){a.originalStyle||(a.originalStyle=a.element.getAttribute("style")||""),a.element.style.cssText=a.originalStyle+";white-space:"+a.whiteSpace+";display:"+a.display+";font-size:"+a.currentFontSize+"px"},r=function(a){a.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:a.previousFontSize,newValue:a.currentFontSize,scaleFactor:a.currentFontSize/a.previousFontSize}}))},s=function(a,b){return function(){a.dirty=b,i()}},t=function(a){a.newbie=!0,a.dirty=!0,g.push(a)},u=function(a){return function(){g=g.filter(function(b){return b.element!==a.element}),a.observeMutations&&a.observer.disconnect(),a.element.style.cssText=a.originalStyle}},v=function(a){a.observeMutations&&(a.observer=new MutationObserver(s(a,f.DIRTY_CONTENT)),a.observer.observe(a.element,a.observeMutations))},w={subtree:!0,childList:!0,characterData:!0},x={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in a&&w},y=null,z=function(){a.clearTimeout(y),y=a.setTimeout(j(f.DIRTY_LAYOUT),d.observeWindowDelay)},A=["resize","orientationchange"];return Object.defineProperty(d,"observeWindow",{set:function(b){var c=(b?"add":"remove")+"EventListener";A.forEach(function(b){a[c](b,z)})}}),d.observeWindow=!0,d.observeWindowDelay=100,d.fitAll=j(f.DIRTY),d}}("undefined"==typeof window?null:window),a.exports=b.default});
//# sourceMappingURL=fitty.min.js.map